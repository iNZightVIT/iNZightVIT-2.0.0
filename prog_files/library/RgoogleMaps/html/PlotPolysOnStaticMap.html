<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: plots polygons on map</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for PlotPolysOnStaticMap {RgoogleMaps}"><tr><td>PlotPolysOnStaticMap {RgoogleMaps}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>plots polygons on map</h2>

<h3>Description</h3>

<p>This function plots/overlays polygons on a map. Typically, the polygons originate from a shapefile.</p>


<h3>Usage</h3>

<pre>PlotPolysOnStaticMap(MyMap, polys, col, border = NULL, lwd = 0.25, 
    verbose = 0, add = TRUE, textInPolys = NULL, ...)</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>MyMap</code></td>
<td>
<p>map image returned from e.g. <code>GetMap()</code></p>
</td></tr>
<tr valign="top"><td><code>polys</code></td>
<td>
<p>or of class <a href="../../sp/html/SpatialPolygons.html">SpatialPolygons</a> from the package sp
polygons to overlay; these can be either of class <a href="../../PBSmapping/html/PolySet.html">PolySet</a> from the package PBSmapping</p>
</td></tr>
<tr valign="top"><td><code>col</code></td>
<td>
<p>(optional) vector of colors, one for each polygon</p>
</td></tr>
<tr valign="top"><td><code>border</code></td>
<td>
<p>the color to draw the border. The default, NULL, means to use <a href="../../graphics/html/par.html">par</a>(&quot;fg&quot;). Use border = NA to omit borders, see <a href="../../graphics/html/polygon.html">polygon</a></p>
</td></tr>
<tr valign="top"><td><code>lwd</code></td>
<td>
<p>line width, see <a href="../../graphics/html/par.html">par</a></p>
</td></tr>
<tr valign="top"><td><code>verbose</code></td>
<td>
<p>level of verbosity</p>
</td></tr>
<tr valign="top"><td><code>add</code></td>
<td>
<p>start a new plot or add to an existing</p>
</td></tr>
<tr valign="top"><td><code>textInPolys</code></td>
<td>
<p>text to be displayed inside polygons.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>further arguments passed to <code>PlotOnStaticMap</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Markus Loecher</p>


<h3>See Also</h3>

<p><a href="PlotOnStaticMap.html">PlotOnStaticMap</a> <a href="mypolygon.html">mypolygon</a></p>


<h3>Examples</h3>

<pre>
if (interactive()){
  #require(PBSmapping);
  shpFile &lt;- paste(system.file(package = "RgoogleMaps"), "/shapes/bg11_d00.shp", sep = "")
  #shpFile &lt;- system.file('bg11_d00.shp', package = "RgoogleMaps");
  
  shp=importShapefile(shpFile,projection="LL");
  bb &lt;- qbbox(lat = shp[,"Y"], lon = shp[,"X"]);
  MyMap &lt;- GetMap.bbox(bb$lonR, bb$latR, destfile = "DC.png");
  PlotPolysOnStaticMap(MyMap, shp, lwd=.5, col = rgb(0.25,0.25,0.25,0.025), add = F);
  
  #Try an open street map:

  mapOSM &lt;- GetMap.OSM(lonR=bb$lonR, latR=bb$latR, scale = 150000, destfile = "DC.png");
  PlotPolysOnStaticMap(mapOSM, shp, lwd=.5, col = rgb(0.75,0.25,0.25,0.15), add = F);

  #North Carolina SIDS data set:
  shpFile &lt;- system.file("shapes/sids.shp", package="maptools");
  shp=importShapefile(shpFile,projection="LL");
  bb &lt;- qbbox(lat = shp[,"Y"], lon = shp[,"X"]);
  MyMap &lt;- GetMap.bbox(bb$lonR, bb$latR, destfile = "SIDS.png");
  #compute regularized SID rate
  sid &lt;- 100*attr(shp, "PolyData")$SID74/(attr(shp, "PolyData")$BIR74+500)
  b &lt;- as.integer(cut(sid, quantile(sid, seq(0,1,length=8)) ));
  b[is.na(b)] &lt;- 1;
  opal &lt;- col2rgb(grey.colors(7), alpha=TRUE)/255; opal["alpha",] &lt;- 0.2;
  shp[,"col"] &lt;- rgb(0.1,0.1,0.1,0.2);
  for (i in 1:length(b)) 
    shp[shp[,"PID"] == i,"col"] &lt;- rgb(opal[1,b[i]],opal[2,b[i]],opal[3,b[i]],opal[4,b[i]]);
  PlotPolysOnStaticMap(MyMap, shp, lwd=.5, col = shp[,"col"], add = F);
  
  #compare the accuracy of this plot to a Google Map overlay:
  library(maptools);
  qk &lt;- SpatialPointsDataFrame(as.data.frame(shp[, c("X","Y")]), as.data.frame(shp[, c("X","Y")]))
  sp::proj4string(qk) &lt;- CRS("+proj=longlat");
  tf &lt;- "NC.counties";
  SGqk &lt;- GE_SpatialGrid(qk)
  png(file=paste(tf, ".png", sep=""), width=SGqk$width, height=SGqk$height,
  bg="transparent")
  par(mar=c(0,0,0,0), xaxs="i", yaxs="i");par(mai = rep(0,4))
  PBSmapping::plotPolys(shp, plt=NULL)
  dev.off()
  maptools::kmlOverlay(SGqk, paste(tf, ".kml", sep=""), paste(tf, ".png", sep=""));
  #This kml file can now be inspected in Google Earth or Google Maps
  
  #or choose an aspect ratio that corresponds better to North Carolina's elongated shape:
  MyMap &lt;- GetMap.bbox(bb$lonR, bb$latR, destfile = "SIDS.png", size = c(640, 320), zoom = 7);
  PlotPolysOnStaticMap(MyMap, shp, lwd=.5, col = shp[,"col"], add = F);
 }
</pre>

<hr /><div style="text-align: center;">[Package <em>RgoogleMaps</em> version 1.2.0.7 <a href="00Index.html">Index</a>]</div>
</body></html>
